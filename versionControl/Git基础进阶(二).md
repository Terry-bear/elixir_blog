---
title: "GitåŸºç¡€è¿›é˜¶(äºŒ)"
date: 2019-04-21T17:02:01+08:00
lastmod: 2019-04-21T17:02:01+08:00
draft: false
keywords: ["personal"]
description: ""
tags: ["personal"]
categories: ["personal"]
author: "Terryzh"

postMetaInFooter: false

---

<!--more-->

äº†è§£äº†åŸºç¡€çš„Gitçš„ç”¨æ³•ï¼Œç›¸ä¿¡å¤§å®¶åœ¨æŒæ¡åŸºæœ¬å‘½ä»¤åå·²ç»å¯ä»¥ç†Ÿç»ƒä½¿ç”¨äº†ã€‚å¯¹äºä¸ªäººå¼€å‘ï¼Œæˆ‘ä»¬æˆ–è®¸ä¸éœ€è¦å¤ªå¤šçš„åä½œæˆ–è€…code reviewï¼Œä¸€ä¸ªäººå¯¹ä»£ç çš„ç»´æŠ¤æ›´å¤§çš„ä½“ç°æ˜¯å¯¹å†å²æäº¤çš„æŸ¥çœ‹å’Œå˜æ›´ï¼Œè¿™ä¸ªåœ¨åŸºç¡€ç« èŠ‚å·²ç»æœ‰è¯¦ç»†çš„åº”ç”¨äº†ã€‚

é‚£ä¹ˆï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œä»£ç çš„å¼€å‘ï¼Œå¾ˆå¤šæƒ…å†µä¸‹æ˜¯å¤šäººåä½œçš„ä¸€ä¸ªçŠ¶æ€ï¼Œåœ¨å¤šäººåä½œçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ç¡®ä¿å¯¹ä»£ç çš„ç»´æŠ¤è¾¾åˆ°ä¸€ä¸ªå…±åŒçš„è®¤å¯å’ŒæŒç»­çš„è¿­ä»£å‘¢ï¼Ÿ

è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸è¯·å‡ºæˆ‘ä»¬Gitçš„å¦ä¸€å¤§é»‘ç§‘æŠ€èˆ¬çš„åŠŸèƒ½äº†ã€‚

**ä»£ç åˆ†æ”¯**

**ä»£ç æ ‡ç­¾**

æ¥ä¸‹æ¥ï¼Œå°†ä¸€ä¸€ä»‹ç»ä»–ä»¬çš„è¯¦ç»†ä½¿ç”¨ã€‚

## ä¸ºä»€ä¹ˆæœ‰åˆ†æ”¯ï¼ˆbranchï¼‰

é¦–å…ˆï¼Œæˆ‘ä»¬åº”è¯¥æ˜ç¡®ä¸€ç‚¹ï¼Œä»€ä¹ˆæ˜¯**åˆ†æ”¯**ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå­—é¢æ„æ€çš„åˆ†æ”¯ï¼Œåº”è¯¥æ˜¯ä»ä¸»å¹²é“ä¸Šé¢åšä¸€ä¸ªåˆ†æµçš„æ“ä½œï¼Œå°±åƒé•¿æ±Ÿé»„æ²³æ±‡å…¥å¤§æµ·çš„å›¾ä¸­ï¼Œä¼šé‡åˆ°å¾ˆå¤šçš„åˆ†æµï¼ŒåŒ…æ‹¬ä¸€ç³»åˆ—çš„å°æ²³å°æºªã€‚

Gitä¸­åˆ†æ”¯çš„å‡ºç°å¤§å¤§æ‰©å±•äº†Gitä½œä¸ºç‰ˆæœ¬æ§åˆ¶çš„å¤§ä½¬åœ°ä½ã€‚

> æˆ‘ä»¬åœ¨æ¯åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯çš„æ—¶å€™ï¼Œå…¶å®éƒ½æ˜¯å¯¹å½“å‰hardæŒ‡é’ˆæ‰€åœ¨ä½ç½®çš„åˆ†æ”¯è¿›è¡Œå…‹éš†ï¼Œç„¶åå°†å†å²çš„commitæ‰“å…¥æ–°åˆ†æ”¯å†…ã€‚è¿™ä¸€ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œæ–°å»ºåˆ†æ”¯æ˜¯ä¸ä¼šå‡ºç°ç©ºåˆ†æ”¯ï¼ˆæ²¡æœ‰commitï¼‰çš„æƒ…å†µã€‚

åºŸè¯ä¸å¤šå°‘ï¼Œåˆ†æ”¯åœ¨Gitä¸­ï¼Œç¡®è®¤ä¹Ÿæ˜¯ç›¸åŒçš„æ„æ€ã€‚
é‚£æˆ‘ä»¬å°±é¦–å…ˆåˆ›å»ºä¸€ä¸ªè‡ªå·±çš„åˆ†æ”¯å§ã€‚

```bash
# åˆ›å»ºè‡ªå®šä¹‰åå­—çš„åˆ†æ”¯
git branch [new branch name]
# åˆ‡æ¢åˆ°è‡ªå®šä¹‰çš„åˆ†æ”¯ä¸‹
git checkout [new branch name]
```

### åˆ†è§£ä¸‹è¿™ä¸¤ä¸ªå‘½ä»¤

`git branch`åšäº†ä»€ä¹ˆï¼Ÿ

![git branch](/img/picture/git2-newbranch.png)

å¯ä»¥çœ‹å‡ºåœ¨`git branch`åˆ›å»ºæ–°åˆ†æ”¯æ—¶ï¼Œæ˜¯åŸºäºå½“å‰hardçš„åˆ†æ”¯ï¼ˆmasterï¼‰çš„å…‹éš†ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œhardæ˜¯æˆ‘ä»¬å½“å‰çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘äº†masterå¹¶ä¸”åŸºäºmasteråˆ›å»ºäº†æ–°çš„devã€‚
æ­¤æ—¶ï¼Œæˆ‘ä¹ˆçš„hardè¿˜åœ¨masterä¸Šã€‚

æˆ‘ä»¬éœ€è¦`git checkout`æŠŠhardçš„æŒ‡é’ˆæŒ‡å‘æˆ‘ä»¬æ–°åˆ›å»ºçš„åˆ†æ”¯devä¸‹ã€‚

![git branch](/img/picture/git2-checkout.png)

æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä¸€æ¡å‘½ä»¤ä»£æ›¿ä¸Šè¿°çš„ä¸¤ä¸ªå‘½ä»¤ï¼Œè¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚

```bash
git checkout -b [new branch name]
```

è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ç”¨`git branch`çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ç‰ˆæœ¬åº“é‡Œé¢å·²ç»å¤šäº†ä¸€ä¸ªåˆ†æ”¯äº†ã€‚

```bash
$ git branch
master
*dev
```

æ­¤æ—¶æˆ‘ä»¬çœ‹åˆ°çš„åˆ†æ”¯æ˜¯æœ¬åœ°åˆ†æ”¯ï¼Œé‚£å¦‚ä½•æŠŠæœ¬åœ°å·²ç»ä¿®æ”¹å¥½çš„åˆ†æ”¯æäº¤åˆ°çº¿ä¸Šå‘¢ï¼Ÿ

```bash
# å’Œæäº¤commitä¸€æ ·ä¸æ»‘æŸ”é¡º
git push orgin [branch name]
```

è¿™æ ·ï¼Œæˆ‘ä»¬å¯¹äºåˆ†æ”¯ï¼Œå°±æœ‰äº†ä¸€ä¸ªåˆæ­¥çš„æ¦‚å¿µå’Œç†è§£äº†ã€‚å…³äºåˆ†æ”¯æ·±å…¥çš„å†…å®¹ä¼šåœ¨åé¢çš„ç« èŠ‚æåŠã€‚è¿™é‡Œåªé’ˆå¯¹åˆå­¦è€…å’ŒåŸºæœ¬å¸¸ç”¨çš„æ“ä½œï¼Œä¸æ¶‰åŠå¤æ‚æ“ä½œï¼Œåˆ’æ¸…éš¾åº¦å’ŒåŠŸèƒ½çš„è¾¹ç•Œï¼Œæˆ‘è§‰å¾—æ›´æœ‰åŠ©äºè¯»è€…çš„ç›®çš„æ€§ã€‚

## ä¸ºä»€ä¹ˆæœ‰æ ‡ç­¾ï¼ˆtagï¼‰

æ¥ä¸‹æ¥è®©æˆ‘ä»¬è°ˆä¸€è°ˆtagçš„æ„ä¹‰ï¼Œç½‘ä¸Šå…³äºGitçš„ä½¿ç”¨æ•™ç¨‹åƒåƒä¸‡ï¼Œè¿™é‡Œæˆ‘ä¸ä¼šæŒ‰ç…§æ­»æ¿çš„æ–¹å¼è¿›è¡Œç®€å•çš„è¯‰è¯´ï¼Œè€Œæ˜¯æ ¹æ®ç»“åˆäº†ä¸ªäººåœ¨å®æˆ˜å·¥ä½œä¸­è¿ç”¨Gitæ¥è¿›è¡Œæ“ä½œçš„é¢‘ç‡å¯¹æ–‡ç« è¿›è¡Œå¤§å°çš„åˆ†çº§çš„ã€‚æ‰€ä»¥æ€»ä½“ä¸Šæ¥çœ‹ä¼šæœ‰äº›è®¸çš„å‡Œä¹±ï¼Œä½†æ˜¯å¸¦æ¥çš„å®é™…ä»·å€¼å´æ˜¯å€¼å¾—è‚¯å®šçš„ã€‚

åœ¨å·¥ä½œä¸­ï¼Œå¯¹äºå…¥é—¨1-3å¹´çš„å‰ç«¯å°ç™½ï¼Œæˆ–è€…æ˜¯åç«¯å°ç™½å¾€å¾€ç”¨ä¸åˆ°tagè¿™ä¸ªä¸œè¥¿ï¼Œå³ä½¿ç”¨åˆ°äº†ï¼Œä¹Ÿæ˜¯è‡ªå·±éƒ¨é—¨çš„æŠ€æœ¯ç»ç†æˆ–è€…æ¶æ„å¸ˆå‘Šè¯‰ä½ ï¼Œâ€œå—¯ï¼Œä½ æŠŠXXåŠŸèƒ½åŠ ä¸Šäº†ä»¥åæ‰“ä¸€ä¸ªtagï¼Œè¿™è¾¹æˆ‘å¥½åšå¤„ç†â€ã€‚

é‚£ä¹ˆï¼Œå…¶å®tagå¯¹æˆ‘ä»¬æ¥è¯´æ›´æƒ³æ˜¯ä¸€ä¸ªé™„åŠ çš„éšæ€§åŠŸèƒ½ï¼Œåœ¨åˆçº§çš„å·¥ä½œä¸­åªè¦ä¼šæ‰“tagå°±è¡Œäº†ã€‚å®Œå…¨ä¸ç”¨è€ƒè™‘ä¸ºä»€ä¹ˆè¦æ‰“tagã€‚

åšä¸»åœ¨è¿™é‡Œå°±ç¨å¾®çš„åˆ†æäº†ä¸€ä¸‹ã€‚

**æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦æ‰“tag**

ç»å¸¸æ··è¿¹githubæˆ–è€…æ˜¯gitlabçš„äººåº”è¯¥çŸ¥é“ï¼Œåœ¨githubä¸Šæœ‰å¾ˆå¤šçš„å¼€æºä»£ç ï¼Œè¿™äº›ä»£ç çš„ç»´æŠ¤å¾€å¾€æ¶‰åŠåˆ°äº†å¤æ‚çš„å›¢é˜Ÿåä½œå’Œäº¤äº’ã€‚

å¯¹äºtagçš„ç®¡ç†ï¼Œæ›´å¤šçš„åº”ç”¨åº”è¯¥æ˜¯releaseç‰ˆæœ¬ä¸Šã€‚releaseç‰ˆæœ¬ä¸­ä¼šå‰”é™¤æ‰å¾ˆå¤šçš„æ—¥å¸¸commitï¼Œè¿™äº›æ—¥å¸¸commitæ˜¯ä¸ä¼šå‡ºç°åœ¨releaseç‰ˆæœ¬ä¸­çš„ã€‚æˆ‘ä»¬çš„æ¯ä¸€ä¸ªcommitæäº¤ï¼Œå°±æ˜¯ä¸€ä¸ªtagã€‚

tagçš„ä½¿ç”¨ä¹Ÿæœ‰è›®å¤šï¼Œä½†æ˜¯ç›®å‰åšä¸»äº†è§£åˆ°ï¼Œtagçš„ä½¿ç”¨ç›¸å¯¹è¾ƒä¸ºè‡ªç”±ï¼Œæ²¡æœ‰ç›¸åº”çš„æ ‡å‡†åŒ–ã€‚

æœ€å¸¸ä½¿ç”¨çš„æ˜¯å°†tagçš„ç‰ˆæœ¬åˆ†ä¸ºä¸‰ä¸ªè¿­ä»£ã€‚

**0.0.0**

ç¬¬ä¸€ä¸ª0æ˜¯ä»£ç çš„å¤§ç‰ˆæœ¬æ›´æ–°ï¼Œä¸»è¦ä¼šæ¶‰åŠåˆ°é‡å¤§çš„bugä¿®å¤ï¼Œæˆ–è€…æ˜¯å¤§ç¯‡å¹…çš„ä»£ç é‡æ„ï¼Œä¹Ÿå¯èƒ½æ˜¯æ–°åŠ å…¥çš„åŠŸèƒ½å’Œå¾€æœŸç‰ˆæœ¬çš„åŠŸèƒ½æœ‰å¤§å¹…çš„å˜åŠ¨ã€‚

ç¬¬äºŒä¸ª0æ˜¯ä»£ç çš„äºŒçº§æ›´æ–°ï¼Œä¸»è¦ä¼šæ¶‰åŠåˆ°ä¸€äº›å°åŠŸèƒ½çš„æ·»åŠ ï¼Œä¸€äº›ç´§æ€¥çš„bugä¿®å¤ï¼Œæˆ–è€…æ˜¯å°ç¯‡å¹…çš„ä»£ç é‡æ„å’Œä¼˜åŒ–å·¥ä½œã€‚

ç¬¬ä¸‰ä¸ª0æ˜¯ä»£ç çš„ä¸‰çº§æ›´æ–°ï¼Œä¸»è¦ä¼šæ¶‰åŠåˆ°æ—¥å¸¸çš„å°bugä¿®å¤ï¼Œå¹¶ä¸”è¿™ç§ç¯‡å¹…çš„æ›´æ–°ä¸€å®šä¸ä¼šæ¶‰åŠåˆ°ä»£ç å‘½åçš„æ›´æ”¹å’Œäº¤äº’æ–¹å¼çš„å˜åŠ¨ã€‚

---

è¯´äº†è¿™ä¹ˆå¤šï¼Œå…¶å®è¿˜æ˜¯æƒ³è®©å°èŒæ–°ä»¬å¯¹tagæœ‰ä¸€ä¸ªåŸºç¡€çš„è®¤è¯†äº†äº†è§£ã€‚

å…¶å®åœ¨Gitä¸­ï¼Œtagçš„ç”¨æ³•éå¸¸çš„ç®€å•ã€‚ä½†æ˜¯æƒ³ç”¨å¥½tagï¼Œè¿˜æ˜¯éœ€è¦å·¥ä½œç»éªŒçš„æ²‰æ·€ã€‚

### åˆ—å‡ºæ ‡ç­¾

åˆ—å‡ºç°æœ‰æ ‡ç­¾çš„å‘½ä»¤éå¸¸ç®€å•ï¼Œç›´æ¥è¿è¡Œ `git tag` å³å¯ï¼š

```bash
$ git tag
v0.1
v1.3
```

git tag ä¹Ÿæ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢

```bash
$ git tag -l 'v1.4.2.*'
v1.4.2.1
v1.4.2.2
v1.4.2.3
v1.4.2.4
```

### æ–°å»ºæ ‡ç­¾

Git ä½¿ç”¨çš„æ ‡ç­¾æœ‰ä¸¤ç§ç±»å‹ï¼š
**è½»é‡çº§çš„ï¼ˆlightweightï¼‰**å’Œ**å«é™„æ³¨çš„ï¼ˆannotatedï¼‰**ã€‚

- è½»é‡çº§æ ‡ç­¾å°±åƒæ˜¯ä¸ªä¸ä¼šå˜åŒ–çš„åˆ†æ”¯ï¼Œå®é™…ä¸Šå®ƒå°±æ˜¯ä¸ªæŒ‡å‘ç‰¹å®šæäº¤å¯¹è±¡çš„å¼•ç”¨ã€‚
- å«é™„æ³¨æ ‡ç­¾ï¼Œå®é™…ä¸Šæ˜¯å­˜å‚¨åœ¨ä»“åº“ä¸­çš„ä¸€ä¸ªç‹¬ç«‹å¯¹è±¡ï¼Œå®ƒæœ‰è‡ªèº«çš„æ ¡éªŒå’Œä¿¡æ¯ï¼ŒåŒ…å«ç€æ ‡ç­¾çš„åå­—ï¼Œç”µå­é‚®ä»¶åœ°å€å’Œæ—¥æœŸï¼Œä»¥åŠæ ‡ç­¾è¯´æ˜ã€‚

> ps: é™„æ³¨æ ‡ç­¾æœ¬èº«ä¹Ÿå…è®¸ä½¿ç”¨ GNU Privacy Guard (GPG) æ¥ç­¾ç½²æˆ–éªŒè¯ã€‚

#### æ–°å»ºå«é™„æ³¨çš„æ ‡ç­¾

åˆ›å»ºä¸€ä¸ªå«é™„æ³¨ç±»å‹çš„æ ‡ç­¾éå¸¸ç®€å•.

- `-a` ï¼ˆè¯‘æ³¨ï¼šå– annotated çš„é¦–å­—æ¯ï¼‰æŒ‡å®šæ ‡ç­¾åå­—å³å¯ã€‚
- `-m` é€‰é¡¹åˆ™æŒ‡å®šäº†å¯¹åº”çš„æ ‡ç­¾è¯´æ˜

```bash
$ git tag -a v1.4 -m 'my version 1.4'
$ git tag
v0.1
v1.3
v1.4
```

å¯ä»¥ä½¿ç”¨ git show å‘½ä»¤æŸ¥çœ‹ç›¸åº”æ ‡ç­¾çš„ç‰ˆæœ¬ä¿¡æ¯

```bash
$ git show v1.4
# tag åå­—
tag v1.4
# åŸºç¡€ä¿¡æ¯
Tagger: Scott Chacon <schacon@gee-mail.com>
# åˆ›å»ºæ—¥æœŸ
Date:   Mon Feb 9 14:45:11 2009 -0800
# -mè‡ªå·±æ·»åŠ çš„ä¿¡æ¯
my version 1.4
# commitç‰ˆæœ¬å·
commit 15027957951b64cf874c3557a0f3547bd83b3ff6
# æ˜¯å¦èåˆè¿‡åˆ†æ”¯
Merge: 4a447f7... a6b4c97...
# åŸºç¡€ä¿¡æ¯
Author: Scott Chacon <schacon@gee-mail.com>
# æ—¶é—´
Date:   Sun Feb 8 19:02:46 2009 -0800
    Merge branch 'experiment'
```

## æ­¤ç« å‘½ä»¤çš„å°ç»“

è¿™ä¸€èŠ‚æ€»ç»“äº†ä¸Šè¿°å°èŠ‚å‡ºç°çš„å„ç§å‘½ä»¤å¹¶ä¸”åšäº†ç›¸åº”çš„å°å¹…åº¦æ‰©å±•ã€‚

| ä½œç”¨ | å‘½ä»¤ | å¸¸ç”¨å‚æ•° |
| --- | --- | --- |
| æŸ¥çœ‹åˆ†æ”¯ | git branch | -r å¯æŸ¥çœ‹è¿œç¨‹ |
| æ–°å»ºåˆ†æ”¯å¹¶æ£€å‡º | git checkout -b [newBranch] | -b æ–°å»ºåˆ†æ”¯ |
| æŸ¥çœ‹æ ‡ç­¾ | git tag -l 'XXX' | -l æ¨¡ç³ŠæŸ¥è¯¢ |
| åˆ é™¤åˆ†æ”¯ | git branch -d [branch name] | -d åˆ é™¤ |
| åˆå¹¶åˆ†æ”¯ | git merge [branch name] | - |

> ps: åˆå¹¶åˆ†æ”¯ä¼šæ¶‰åŠåˆ°å¾ˆå¤šé—®é¢˜ï¼Œä»Šå¤©å°±å…ˆè®²åˆ°è¿™é‡Œï¼Œä¸‹æœŸè§å•¦ã€‚ğŸ¤£ğŸ¤£ğŸ¤£
